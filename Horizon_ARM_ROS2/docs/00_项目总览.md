# Horizon ARM ROS2 - å…­è½´æœºæ¢°è‡‚æ§åˆ¶å¹³å°

## é¡¹ç›®æ¦‚è¿°

**Horizon ARM ROS2** æ˜¯ä¸€ä¸ªå®Œæ•´çš„å…­è½´æœºæ¢°è‡‚æ§åˆ¶å¹³å°ï¼Œé›†æˆäº†è¿åŠ¨è§„åˆ’ã€å¯è§†åŒ–ä»¿çœŸå’Œç¡¬ä»¶æ§åˆ¶åŠŸèƒ½ã€‚ç³»ç»ŸåŸºäºæ¨¡å—åŒ–æ¶æ„ï¼Œæä¾›ä»åŸºç¡€æ§åˆ¶åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

### ç³»ç»Ÿç‰¹æ€§

- **ğŸ”§ æ¨¡å—åŒ–æ¶æ„**ï¼šæ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼Œä¾¿äºç†è§£å’Œæ‰©å±•
- **ğŸ® å¤šæ§åˆ¶æ¨¡å¼**ï¼šæ”¯æŒå›¾å½¢ç•Œé¢æ§åˆ¶ã€è¯é¢˜é€šä¿¡å’Œè½¨è¿¹è§„åˆ’
- **ğŸ¨ å®Œæ•´å¯è§†åŒ–**ï¼šé›†æˆMoveIt2è¿åŠ¨è§„åˆ’å’ŒRVizå¯è§†åŒ–
- **âš¡ å®æ—¶æ§åˆ¶**ï¼šé«˜é¢‘ç‡å®æ—¶æ§åˆ¶å’Œè½¨è¿¹è·Ÿè¸ª
- **ğŸš€ ä¾¿æ·éƒ¨ç½²**ï¼šæ ‡å‡†ROS2å·¥ä½œç©ºé—´éƒ¨ç½²

### ç³»ç»Ÿç»„æˆ

æœ¬å¹³å°åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š
- **æ§åˆ¶ç•Œé¢**ï¼šæä¾›ç›´è§‚çš„å›¾å½¢åŒ–æ“ä½œå’Œç¡¬ä»¶è¿æ¥ç®¡ç†
- **ROS2é©±åŠ¨**ï¼šå®ç°è¯é¢˜é€šä¿¡ã€çŠ¶æ€å‘å¸ƒå’Œè½¨è¿¹æ‰§è¡Œ
- **è¿åŠ¨è§„åˆ’**ï¼šåŸºäºMoveIt2çš„è·¯å¾„è§„åˆ’å’Œç¢°æ’æ£€æµ‹

## ç³»ç»Ÿæ¶æ„

### ç›®å½•ç»“æ„

```
Horizon_ARM_ROS2/
â”œâ”€â”€ arm-ros2/                        # æ ¸å¿ƒæ§åˆ¶æ¨¡å—
â”‚   â”œâ”€â”€ review_ui.py                 # å›¾å½¢åŒ–æ§åˆ¶ç•Œé¢
â”‚   â””â”€â”€ mapping.yaml                 # æœºæ¢°è‡‚é…ç½®æ–‡ä»¶
â”œâ”€â”€ src/                             # ROS2åŠŸèƒ½åŒ…
â”‚   â”œâ”€â”€ horizon_arm_bridge/          # ç¡¬ä»¶é©±åŠ¨æ¡¥æ¥
â”‚   â”‚   â”œâ”€â”€ scripts/trajectory_stream_sdk_driver.py  # é©±åŠ¨èŠ‚ç‚¹
â”‚   â”‚   â””â”€â”€ launch/bringup_sdk_ui.launch.py         # ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶
â”‚   â”œâ”€â”€ horizon_arm_moveit_config/   # MoveIt2è¿åŠ¨è§„åˆ’é…ç½®
â”‚   â””â”€â”€ new_arm/                     # æœºå™¨äººæ¨¡å‹å®šä¹‰
â”œâ”€â”€ examples/                        # ç¤ºä¾‹ç¨‹åº
â”‚   â”œâ”€â”€ basic_joint_control.py       # åŸºç¡€å…³èŠ‚æ§åˆ¶
â”‚   â”œâ”€â”€ pick_and_place_demo.py       # æŠ“å–æ”¾ç½®æ¼”ç¤º
â”‚   â””â”€â”€ servo_square.py              # è½¨è¿¹è·Ÿè¸ªç¤ºä¾‹
â”œâ”€â”€ docs/                            # æŠ€æœ¯æ–‡æ¡£
â””â”€â”€ sdk-wheel/                       # SDKå®‰è£…åŒ…
```

### æ ¸å¿ƒç»„ä»¶

- **å›¾å½¢æ§åˆ¶ç•Œé¢**ï¼šæä¾›ç›´è§‚çš„æœºæ¢°è‡‚æ“ä½œå’ŒçŠ¶æ€ç›‘æ§
- **é©±åŠ¨æ¡¥æ¥èŠ‚ç‚¹**ï¼šå¤„ç†ROS2è¯é¢˜é€šä¿¡å’Œç¡¬ä»¶æ§åˆ¶æ¥å£
- **è¿åŠ¨è§„åˆ’ç³»ç»Ÿ**ï¼šåŸºäºMoveIt2çš„è·¯å¾„è§„åˆ’å’Œç¢°æ’æ£€æµ‹
- **å¯è§†åŒ–ç³»ç»Ÿ**ï¼šåŸºäºRVizçš„3Dä»¿çœŸå’Œè½¨è¿¹æ˜¾ç¤º
- **ç¤ºä¾‹ç¨‹åº**ï¼šæ¶µç›–åŸºç¡€æ§åˆ¶åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´æ¡ˆä¾‹

## ç³»ç»Ÿå·¥ä½œåŸç†

### æ§åˆ¶æ¨¡å¼

ç³»ç»Ÿæä¾›ä¸‰ç§ä¸»è¦çš„æ§åˆ¶æ¨¡å¼ï¼Œé€‚ç”¨äºä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š

#### ç›´æ¥æ§åˆ¶æ¨¡å¼
```mermaid
flowchart LR
    UI[æ§åˆ¶ç•Œé¢] --> SDK[ç¡¬ä»¶æ¥å£] --> ARM[æœºæ¢°è‡‚]
    ARM --> SDK --> UI
```
- **åº”ç”¨åœºæ™¯**ï¼šå•æ­¥åŠ¨ä½œæ‰§è¡Œã€å‚æ•°è°ƒè¯•ã€ç³»ç»Ÿæ ‡å®š
- **ç‰¹ç‚¹**ï¼šå“åº”å¿«é€Ÿã€æ§åˆ¶ç²¾ç¡®ã€æ“ä½œç®€å•

#### è¯é¢˜é€šä¿¡æ¨¡å¼
```mermaid
flowchart LR
    APP[åº”ç”¨ç¨‹åº] --> TOPIC[ROSè¯é¢˜] --> DRIVER[é©±åŠ¨èŠ‚ç‚¹] --> ARM[æœºæ¢°è‡‚]
    ARM --> DRIVER --> STATE[çŠ¶æ€è¯é¢˜] --> VIZ[å¯è§†åŒ–]
```
- **åº”ç”¨åœºæ™¯**ï¼šè¿ç»­è½¨è¿¹æ‰§è¡Œã€å¤šèŠ‚ç‚¹åä½œã€å®æ—¶æ§åˆ¶
- **ç‰¹ç‚¹**ï¼šæ”¯æŒå¤šè¿›ç¨‹ã€çŠ¶æ€åŒæ­¥ã€æ‰©å±•æ€§å¼º

#### è§„åˆ’æ§åˆ¶æ¨¡å¼
```mermaid
flowchart LR
    RVIZ[RVizç•Œé¢] --> MOVEIT[MoveIt2] --> PLAN[è½¨è¿¹è§„åˆ’]
    PLAN --> EXEC[æ‰§è¡Œå™¨] --> ARM[æœºæ¢°è‡‚]
```
- **åº”ç”¨åœºæ™¯**ï¼šè·¯å¾„è§„åˆ’åº”ç”¨ã€é¿éšœæ¼”ç¤ºã€å¤æ‚è½¨è¿¹ç”Ÿæˆ
- **ç‰¹ç‚¹**ï¼šæ™ºèƒ½è§„åˆ’ã€ç¢°æ’æ£€æµ‹ã€å¯è§†åŒ–å¼º

### æ ¸å¿ƒè¯é¢˜

| è¯é¢˜åç§° | ç±»å‹ | åŠŸèƒ½ |
|---------|------|------|
| `/horizon_arm/servo_target` | Float64MultiArray | å…³èŠ‚ç›®æ ‡ä½ç½® |
| `/joint_states` | JointState | å…³èŠ‚çŠ¶æ€åé¦ˆ |
| `/display_planned_path` | DisplayTrajectory | è§„åˆ’è½¨è¿¹æ˜¾ç¤º |

## å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿå¯åŠ¨
```bash
# ä¸€é”®å¯åŠ¨å®Œæ•´ç³»ç»Ÿ
ros2 launch horizon_arm_bridge bringup_sdk_ui.launch.py
```

### ç¤ºä¾‹è¿è¡Œ
```bash
# åŸºç¡€å…³èŠ‚æ§åˆ¶
python3 examples/basic_joint_control.py

# è½¨è¿¹è·Ÿè¸ªæ¼”ç¤º
python3 examples/servo_square.py

# æŠ“å–æ”¾ç½®æ¼”ç¤º
python3 examples/pick_and_place_demo.py
```
